{% extends "base.html" %} 
{% load static %}

{% block content %}

<h1 class="catalog-title-custom">
  CatÃ¡logo de Productos
</h1>

{% if user.is_staff %}
<div class="catalog-admin-add">
  <a href="{% url 'catalog:crear' %}" class="catalog-add-btn">
     â• Agregar producto
  </a>
</div>
{% endif %}

<!-- CONTENEDOR GENERAL -->
<div class="catalog-grid-custom">

  {% for producto in productos %}

    <div class="catalog-card-custom">

      <a href="{% url 'catalog:detalle' producto.pk %}" class="catalog-img-link">
        {% if producto.image %}
          <img src="{{ producto.image.url }}" alt="{{ producto.name }}">
        {% else %}
          <img src="https://via.placeholder.com/400x200?text=Sin+Imagen" alt="Sin imagen">
        {% endif %}
      </a>

      <div class="catalog-body-custom">

        <h3 class="catalog-name">{{ producto.name }}</h3>

        <p class="catalog-price">${{ producto.price }}</p>

        <p class="catalog-desc">{{ producto.description|truncatechars:100 }}</p>

        <a href="{% url 'catalog:agregar_carrito' producto.pk %}" class="catalog-btn-custom">
          ğŸ›’ Agregar a Canasta
        </a>

        {% if user.is_staff %}
          <div class="catalog-admin-box">
            <a href="{% url 'catalog:editar' producto.pk %}" class="catalog-admin-link catalog-admin-edit">
              âœï¸ Editar
            </a>

            <a href="{% url 'catalog:eliminar' producto.pk %}" class="catalog-admin-link catalog-admin-delete">
              ğŸ—‘ï¸ Eliminar
            </a>
          </div>
        {% endif %}

      </div>

    </div>

  {% empty %}
    <p class="catalog-empty">No hay productos disponibles.</p>
  {% endfor %}

</div>

{% if is_paginated %}
<div class="catalog-pagination">
  {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}" class="catalog-page-btn">
      Â« Anterior
    </a>
  {% endif %}

  <span class="catalog-page-info">
    PÃ¡gina {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
  </span>

  {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}" class="catalog-page-btn">
      Siguiente Â»
    </a>
  {% endif %}
</div>
{% endif %}

{% endblock %}
