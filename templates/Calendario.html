{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calendario | Happy Huapi</title>
  <link rel="stylesheet" href="{% static 'css/calendario.css' %}">
</head>
<body>
  <div class="container">
    <h1>Calendario de Reservas</h1>
    <p>Ves próximos {{ fechas|length }} días.</p>

    <div class="links">
      <a href="?days=7">7</a> · 
      <a href="?days=14">14</a> · 
      <a href="?days=31">31</a>
    </div>

    <div class="grid">
      {% for d in fechas %}
        <div class="day">
          <h3>{{ d|date:"D d/m" }}</h3>

          {% if by_day.d %}
            {% for r in by_day.d %}
              <div class="badge">
                {{ r.start_time|time:"H:i" }}–{{ r.end_time|time:"H:i" }} — {{ r.customer_name }}
                {% if r.status != 'approved' %}
                  <em>({{ r.get_status_display }})</em>
                {% endif %}
              </div>
            {% endfor %}
            <a href="{% url 'Reservar' %}?date={{ d }}">Reservar otro horario</a>
          {% else %}
            <p class="free">Día libre</p>
            <a href="{% url 'Reservar' %}?date={{ d }}">Reservar aquí</a>
          {% endif %}
        </div>
      {% endfor %}
    </div>

    <div class="back">
      <a href="{% url 'Inicio' %}">← Volver al inicio</a>
    </div>
  </div>
</body>
</html>
